<!doctype html>
<html lang="en-GB" class="">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="{{ .Site.BaseURL }}css/style.css?{{ .Now.Unix }}" />
    <link rel="apple-touch-icon" sizes="180x180" href="{{ .Site.BaseURL }}assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ .Site.BaseURL }}assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ .Site.BaseURL }}assets/favicons/favicon-16x16.png">
    <link rel="manifest" href="{{ .Site.BaseURL }}assets/favicons/manifest.json">
    <link rel="mask-icon" href="{{ .Site.BaseURL }}assets/favicons/safari-pinned-tab.svg" color="#5c2d70">
    <meta name="theme-color" content="#21F9EE">
    <title>{{ block "title" . }}{{ end }}.</title>
  </head>
  <body>
    <div class="docs">
      <aside class="docs_aside">
        <div class="titlecard">
          <a href="/" rel="home">
            <svg class="icon icon36 icon_marque_small_svg">
              <use xlink:href="{{ .Site.BaseURL }}assets/icons/renders/sprite.svg#marque_small"></use>
            </svg>
          </a>
          <span class="titlecard_version">v: {{ $.Site.Params.version }}.</span>
          <h1 class="typeM heading">{{ .Site.Title }}.</h1>
        </div>
  			<div class="navigationtrigger">
  	      <button type="button" class="navigationtoggle" id="navigationtoggle">
  					Menu
  					<svg class="icon icon16 icon_arrow_toggle_svg">
  	          <use xlink:href="{{ .Site.BaseURL }}assets/icons/renders/sprite.svg#arrow_toggle"></use>
  	        </svg>
  				</button>
  			</div>
  			<form class="searchbar">
  				<div class="searchbar_field">
  					<label for="searchbar_input" class="searchbar_label">Search docs</label>
  					<input class="searchbar_input" type="text" value="" id="searchbar_input" placeholder="Search docs.">
  					<b></b><!-- This isn't a mistake, it's a visual hack -->
  				</div>
  				<button class="searchbar_button" type="submit">
  					<svg class="icon icon22 icon_search_svg">
  						<use xlink:href="{{ .Site.BaseURL }}assets/icons/renders/sprite.svg#search"></use>
  					</svg>
  				</button>
  			</form>
        <div class="navigationwrapper navigationwrapperCollapsed" id="navigationwrapper">
          <nav class="navigation">
            <ul class="navigation_parent">
              {{ partial "navigation/primary.html" . }}
            </ul>
          </nav>
        </div>
      </aside>
      <div class="docs_body">
        {{ block "main" . }}
        {{ end }}
      </div>
    </div>
  </body>
  <script>
    // TODO move into external file
    var mainNav = document.getElementById('navigationwrapper');
    var navToggle = document.getElementById('navigationtoggle');

    // Start by adding the class "collapse" to the mainNav
    //mainNav.classList.add('navigationwrapperCollapsed');

    // Establish a function to toggle the class "collapse"
    function mainNavToggle() {
    	mainNav.classList.toggle('navigationwrapperCollapsed');
  		navToggle.classList.toggle('navigationtoggleActive');
    }
    // Add a click event to run the mainNavToggle function
    navToggle.addEventListener('click', mainNavToggle);
  </script>
  
{{ block "footeradditions" . }}
  <script>

    // Straight up nab from Hugo docs website. Doth of the cap
    var anchorForId = function anchorForId(id) {
      var anchor = document.createElement("a");
      anchor.className = "anchor";
      anchor.href = "#" + id;
      anchor.innerHTML = '<svg class="icon icon_link_svg"><use xlink:href="/assets/icons/renders/sprite.svg#link"></use></svg>';
      return anchor;
    };

    var linkifyAnchors = function linkifyAnchors(level, containingElement) {
      var headers = containingElement.getElementsByTagName("h" + level);
      for (var h = 0; h < headers.length; h++) {
        var header = headers[h];
        if (typeof header.id !== "undefined" && header.id !== "") {
          header.prepend(anchorForId(header.id));
        }
      }
    };

    document.onreadystatechange = function () {
      if (this.readyState === "complete") {
        var contentBlock = document.getElementsByClassName("typebaseArticle")[0];
        if (!contentBlock) {
          return;
        }
        for (var level = 2; level <= 4; level++) {
          linkifyAnchors(level, contentBlock);
        }
      }
    };
  </script>
{{ end }}
</html>
